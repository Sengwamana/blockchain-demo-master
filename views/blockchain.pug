extends layout

block content
  .container-fluid

    .step-bar
      a.step-item(href='/hash')
        span.step-num 1
        | Hash
      span.step-connector
      a.step-item(href='/block')
        span.step-num 2
        | Block
      span.step-connector
      a.step-item.active(href='/blockchain')
        span.step-num 3
        | Blockchain
      span.step-connector
      a.step-item(href='/distributed')
        span.step-num 4
        | Distributed
      span.step-connector
      a.step-item(href='/tokens')
        span.step-num 5
        | Tokens
      span.step-connector
      a.step-item(href='/coinbase')
        span.step-num 6
        | Coinbase

    .page-header-block
      div
        h1.page-title
          span.accent Blockchain
      span.page-step Step 3 of 6

    .beginner-callout
      span.callout-icon ‚õì
      .callout-body
        h4 What is a Blockchain?
        p
          | A blockchain is a chain of blocks where each block contains the 
          strong hash of the previous block
          | . This means changing data in Block 2 also invalidates Block 3, Block 4, and beyond ‚Äî 
          | they all turn 
          span(style='color:#EF4444;font-weight:700') red
          | . To fix them, you would have to re-mine 
          strong every single block
          | . Try editing Block 1 data to see the chain reaction!

    .try-it-challenge
      span.try-icon üß™
      .try-body
        h4 Try It!
        p Type something in Block 2's Data field. Notice Blocks 2, 3, 4, and 5 all turn red! This is because each block's "Prev" field depends on the hash of the block before it. Now mine Block 2 ‚Äî it turns green, but Blocks 3‚Äì5 stay red because their "Prev" no longer matches.

    .row.row-horizon
      - var blocks = []
      - blocks.push({block: 1, chain: 1, nonce: 11316, previous: '0000000000000000000000000000000000000000000000000000000000000000'})
      - blocks.push({block: 2, chain: 1, nonce: 35230, previous: '000015783b764259d382017d91a36d206d0600e2cbb3567748f46a33fe9297cf'})
      - blocks.push({block: 3, chain: 1, nonce: 12937, previous: '000012fa9b916eb9078f8d98a7864e697ae83ed54f5146bd84452cdafd043c19'})
      - blocks.push({block: 4, chain: 1, nonce: 35990, previous: '0000b9015ce2a08b61216ba5a0778545bf4ddd7ceb7bbd85dd8062b29a9140bf'})
      - blocks.push({block: 5, chain: 1, nonce: 56265, previous: '0000ae8bbc96cf89c68be6e10a865cc47c6c48a9ebec3c6cad729646cefaef83'})
      each block in blocks
        .col-xs-7
          include includes/block

  script.
    $(function() {
      setup(1, 1);
      setup(2, 1);
      setup(3, 1);
      setup(4, 1);
      setup(5, 1);
    });

    function getText(block, chain) {
      return $('#block'+block+'chain'+chain+'number').val() +
             $('#block'+block+'chain'+chain+'nonce').val() +
             $('#block'+block+'chain'+chain+'data').val() +
             $('#block'+block+'chain'+chain+'previous').val();
    }

    function setup(block, chain) {
      updateHash(block, chain);
      $('#block'+block+'chain'+chain+'number').bind('input propertychange', function() { updateChain(block, chain); });
      $('#block'+block+'chain'+chain+'nonce').bind('input propertychange', function() { updateChain(block, chain); });
      $('#block'+block+'chain'+chain+'data').bind('input propertychange', function() { updateChain(block, chain); });
      $('#block'+block+'chain'+chain+'mineButton').click(function(e) {
          e.preventDefault();
          var l = Ladda.create(this);
          l.start();
          setTimeout(function() {
              mine(block, chain, true);
              l.stop();
            }, 250);
        });
    }

    .key-takeaways
      h4 üìö Key Takeaways
      ul
        li Each block stores the hash of the previous block in its "Prev" field ‚Äî this creates an unbreakable chain.
        li Changing any block invalidates all subsequent blocks because their "Prev" hashes no longer match.
        li To tamper with a block, you'd need to re-mine it AND every block after it ‚Äî an enormous computational effort.
        li This "chain reaction" is what makes blockchains tamper-evident and secure.
        li The first block (Block #1) has a special "Prev" of all zeros ‚Äî it's called the 
          strong Genesis Block
          | .

    .page-nav
      a.page-nav-btn.prev(href='/block') ‚Üê Block
      a.page-nav-btn.next(href='/distributed') Distributed ‚Üí
